<div class="container">
  <h1 class="todo-title">âœ… ToDo List</h1>

  <!-- Ä°statistikler -->
  <div class="stats">
    <span>ğŸ“Š Toplam: {{ totalCount }}</span>
    <span>âœ… Tamamlanan: {{ completedCount }}</span>
    <span>â³ Aktif: {{ activeCount }}</span>
  </div>

  <!-- Arama Ã‡ubuÄŸu -->
  <div class="search-bar">
    <input type="text"
           placeholder="ğŸ” GÃ¶revlerde ara..."
           [(ngModel)]="searchTerm" />
  </div>

  <!-- Filtre ButonlarÄ± -->
  <div class="filter-buttons">
    <button [class.active]="filterType === 'all'"
            (click)="setFilter('all')">
      Hepsi ({{ totalCount }})
    </button>
    <button [class.active]="filterType === 'active'"
            (click)="setFilter('active')">
      Aktif ({{ activeCount }})
    </button>
    <button [class.active]="filterType === 'completed'"
            (click)="setFilter('completed')">
      Tamamlanan ({{ completedCount }})
    </button>
  </div>

  <!-- Yeni GÃ¶rev -->
  <div class="add-task">
    <input type="text" placeholder="BaÅŸlÄ±k" [(ngModel)]="newItemTitle" />
    <input type="text" placeholder="AÃ§Ä±klama" [(ngModel)]="newItemDescription" />
    <button (click)="onItemAdd()">Ekle</button>
  </div>

  <!-- GÃ¶rev Listesi -->
  <ul class="task-list" *ngIf="filteredTodoItems.length > 0">
    <li *ngFor="let item of filteredTodoItems; let i = index"
        class="task-item"
        draggable="true"
        (dragstart)="onDragStart(todoItems.indexOf(item))"
        (dragover)="onDragOver($event)"
        (drop)="onDrop($event, todoItems.indexOf(item))"
        (dragend)="onDragEnd()"
        [class.dragging]="draggedIndex === todoItems.indexOf(item)">

      <div class="drag-handle">â˜°</div>

      <input type="checkbox"
             [checked]="item.isCompleted"
             (change)="toggleCompleted(item)" />

      <div class="text-container" [class.completed]="item.isCompleted">
        <strong>{{ item.title }}</strong>
        <span class="description">{{ item.description }}</span>
      </div>

      <button (click)="openEditModal(item)">âœï¸ DÃ¼zenle</button>
      <button (click)="onItemDelete(item)">âŒ</button>
    </li>
  </ul>

  <!-- SonuÃ§ BulunamadÄ± -->
  <div class="no-results" *ngIf="filteredTodoItems.length === 0">
    <p *ngIf="searchTerm">ğŸ” "{{ searchTerm }}" iÃ§in sonuÃ§ bulunamadÄ±</p>
    <p *ngIf="!searchTerm && filterType === 'active'">ğŸ‰ Aktif gÃ¶rev yok!</p>
    <p *ngIf="!searchTerm && filterType === 'completed'">ğŸ“ HenÃ¼z tamamlanan gÃ¶rev yok</p>
    <p *ngIf="!searchTerm && filterType === 'all'">ğŸ“ HenÃ¼z gÃ¶rev eklenmedi</p>
  </div>
</div>

<!-- DÃ¼zenleme -->
<div class="modal" *ngIf="editingItem">
  <div class="modal-content">
    <h3>DÃ¼zenle</h3>
    <input [(ngModel)]="editTitle" placeholder="BaÅŸlÄ±k" />
    <input [(ngModel)]="editDescription" placeholder="AÃ§Ä±klama" />
    <div class="modal-buttons">
      <button (click)="saveEditModal()">Kaydet</button>
      <button (click)="closeEditModal()">Ä°ptal</button>
    </div>
  </div>
</div>

<!-- Toast -->
<div class="toast" *ngIf="showToast">{{ toastMessage }}</div>
